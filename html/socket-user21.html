<html>

<head>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js" crossorigin="anonymous"></script>
    <script>
        const socket = io('http://localhost:8081/presence', {
            extraHeaders: {
                authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJrdHBodWMxOTk0IiwiZW1haWwiOiJraHVjdGhpZW5waHVjQGdtYWlsLmNvbSIsInVzZXJfaWQiOjIxLCJpYXQiOjE3MzQ1OTgyNzgsImV4cCI6MTc2NjEzNDI3OH0.w_BRXs1YYAqWttCf1eTrbZkJnaZDH5ztLYaYd0OpqzI"
            },
        });
        socket.on('connect', function () {
            console.log('Connected');
        });
        socket.on('ACTIVE_FRIEND', function (data) {
            console.log('ACTIVE_FRIEND', data);
        });
        socket.on('exception', function (data) {
            console.log('exception', data);
        });
        socket.on('disconnect', function () {
            console.log('Disconnected');
        });
    </script>
</head>

<body>
    <input id="messageInput" />

    <script>
        const inputMessage = document.getElementById("messageInput");
        inputMessage.addEventListener("keyup", (e) => {
            if (e.key !== "Enter") return;
            const inputValue = e.target.value;

            if (inputValue === "OFF") {
                socket.emit("UPDATE_ACTIVE_STATUS", false);
                return;
            }

            if (inputValue === "ON") {
                socket.emit("UPDATE_ACTIVE_STATUS", true);
                return
            }
        })
    </script>
</body>

</html>